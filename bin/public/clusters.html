<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cluster Dashboard</title>
<style>
    body { font-family: Arial, sans-serif; display: flex; }
    #clusters { width: 30%; padding: 20px; background-color: #f0f0f0; height: 95vh; overflow-y: auto; }
    #items { width: 70%; padding: 20px; background-color: #fff; display: flex; flex-wrap: wrap; height: 95vh; overflow-y: auto; }
    .cluster { padding: 10px; margin-bottom: 10px; cursor: pointer; background-color: #e0e0e0; }
    .item { box-sizing: border-box; width: 150px; padding: 10px; margin: 10px; border: 1px solid #ccc; }
</style>
</head>
<body>
<div id="clusters"></div>
<div id="items"></div>

<script>
    // Function to fetch clusters and render them
    function loadClusters() {
        fetch('http://localhost:4567/clusters')
            .then(response => response.json())
            .then(data => {
                const clustersContainer = document.getElementById('clusters');
                clustersContainer.innerHTML = '';
                data.forEach(cluster => {
                    const div = document.createElement('div');
                    div.className = 'cluster';
                    div.textContent = `Cluster ID: ${cluster.id}, Items: ${cluster.items}`;
                    div.onclick = () => loadItems(cluster.id);
                    clustersContainer.appendChild(div);
                });
            })
            .catch(error => console.error('Error loading clusters:', error));
    }

    // Function to fetch items for a specific cluster and render them
    function loadItems(clusterId) {
        fetch(`http://localhost:4567/clusters/${clusterId}`)
            .then(response => response.json())
            .then(data => {
                const itemsContainer = document.getElementById('items');
                itemsContainer.innerHTML = '';
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.textContent = item.content; // Displaying the content of each item
                    itemsContainer.appendChild(div);
                });
            })
            .catch(error => console.error('Error loading items:', error));
    }

    // Initial load of clusters
    document.addEventListener('DOMContentLoaded', loadClusters);
</script>
</body>
</html>
